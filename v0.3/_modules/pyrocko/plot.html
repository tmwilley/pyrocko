
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pyrocko.plot &mdash; Pyrocko v0.3 Manual</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Pyrocko v0.3 Manual"
          href="../../_static/opensearch.xml"/>
    <link rel="top" title="Pyrocko v0.3 Manual" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">Pyrocko v0.3 Manual</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <h1>Source code for pyrocko.plot</h1><div class="highlight"><pre>
<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Utility functions and defintions for a common plot style throughout Pyrocko.</span>

<span class="sd">Functions with name prefix ``mpl_`` are Matplotlib specific. All others should</span>
<span class="sd">be toolkit-agnostic.</span>

<span class="sd">The following skeleton can be used to produce nice PDF figures, with absolute</span>
<span class="sd">sizes derived from paper and font sizes (file :file:`examples/plot_skeleton.py`</span>
<span class="sd">in the Pyrocko source directory)::</span>

<span class="sd">    from matplotlib import pyplot as plt</span>

<span class="sd">    from pyrocko.plot import mpl_init, mpl_margins, mpl_papersize</span>
<span class="sd">    # from pyrocko.plot import mpl_labelspace</span>

<span class="sd">    fontsize = 9.   # in points</span>

<span class="sd">    # set some Pyrocko style defaults</span>
<span class="sd">    mpl_init(fontsize=fontsize)</span>

<span class="sd">    fig = plt.figure(figsize=mpl_papersize(&#39;a4&#39;, &#39;landscape&#39;))</span>

<span class="sd">    # let margins be proportional to selected font size, e.g. top and bottom</span>
<span class="sd">    # margin are set to be 5*fontsize = 45 [points]</span>
<span class="sd">    labelpos = mpl_margins(fig, w=7., h=5., units=fontsize)</span>

<span class="sd">    axes = fig.add_subplot(1, 1, 1)</span>

<span class="sd">    # positioning of axis labels</span>
<span class="sd">    # mpl_labelspace(axes)    # either: relative to axis tick labels</span>
<span class="sd">    labelpos(axes, 2., 1.5)   # or: relative to left/bottom paper edge</span>

<span class="sd">    axes.plot([0, 1], [0, 9])</span>

<span class="sd">    axes.set_xlabel(&#39;Time [s]&#39;)</span>
<span class="sd">    axes.set_ylabel(&#39;Amplitude [m]&#39;)</span>

<span class="sd">    fig.savefig(&#39;plot_skeleton.pdf&#39;)</span>

<span class="sd">    plt.show()</span>

<span class="sd">&#39;&#39;&#39;</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="n">point</span> <span class="o">=</span> <span class="mf">1.</span>
<span class="n">inch</span> <span class="o">=</span> <span class="mf">72.</span>
<span class="n">cm</span> <span class="o">=</span> <span class="mf">28.3465</span>

<span class="n">units_dict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;point&#39;</span><span class="p">:</span> <span class="n">point</span><span class="p">,</span>
    <span class="s">&#39;inch&#39;</span><span class="p">:</span> <span class="n">inch</span><span class="p">,</span>
    <span class="s">&#39;cm&#39;</span><span class="p">:</span> <span class="n">cm</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">_doc_units</span> <span class="o">=</span> <span class="s">&quot;``&#39;points&#39;``, ``&#39;inch&#39;``, or ``&#39;cm&#39;``&quot;</span>


<span class="k">def</span> <span class="nf">apply_units</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">units</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">units</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
        <span class="n">units</span> <span class="o">=</span> <span class="n">units_dict</span><span class="p">[</span><span class="n">units</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">/</span> <span class="n">units</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">v</span> <span class="o">/</span> <span class="n">units</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">v</span> <span class="o">/</span> <span class="n">units</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>


<span class="n">tango_colors</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;butter1&#39;</span><span class="p">:</span>     <span class="p">(</span><span class="mi">252</span><span class="p">,</span> <span class="mi">233</span><span class="p">,</span>  <span class="mi">79</span><span class="p">),</span>
    <span class="s">&#39;butter2&#39;</span><span class="p">:</span>     <span class="p">(</span><span class="mi">237</span><span class="p">,</span> <span class="mi">212</span><span class="p">,</span>   <span class="mi">0</span><span class="p">),</span>
    <span class="s">&#39;butter3&#39;</span><span class="p">:</span>     <span class="p">(</span><span class="mi">196</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span>   <span class="mi">0</span><span class="p">),</span>
    <span class="s">&#39;chameleon1&#39;</span><span class="p">:</span>  <span class="p">(</span><span class="mi">138</span><span class="p">,</span> <span class="mi">226</span><span class="p">,</span>  <span class="mi">52</span><span class="p">),</span>
    <span class="s">&#39;chameleon2&#39;</span><span class="p">:</span>  <span class="p">(</span><span class="mi">115</span><span class="p">,</span> <span class="mi">210</span><span class="p">,</span>  <span class="mi">22</span><span class="p">),</span>
    <span class="s">&#39;chameleon3&#39;</span><span class="p">:</span>  <span class="p">(</span><span class="mi">78</span><span class="p">,</span>  <span class="mi">154</span><span class="p">,</span>   <span class="mi">6</span><span class="p">),</span>
    <span class="s">&#39;orange1&#39;</span><span class="p">:</span>     <span class="p">(</span><span class="mi">252</span><span class="p">,</span> <span class="mi">175</span><span class="p">,</span>  <span class="mi">62</span><span class="p">),</span>
    <span class="s">&#39;orange2&#39;</span><span class="p">:</span>     <span class="p">(</span><span class="mi">245</span><span class="p">,</span> <span class="mi">121</span><span class="p">,</span>   <span class="mi">0</span><span class="p">),</span>
    <span class="s">&#39;orange3&#39;</span><span class="p">:</span>     <span class="p">(</span><span class="mi">206</span><span class="p">,</span>  <span class="mi">92</span><span class="p">,</span>   <span class="mi">0</span><span class="p">),</span>
    <span class="s">&#39;skyblue1&#39;</span><span class="p">:</span>    <span class="p">(</span><span class="mi">114</span><span class="p">,</span> <span class="mi">159</span><span class="p">,</span> <span class="mi">207</span><span class="p">),</span>
    <span class="s">&#39;skyblue2&#39;</span><span class="p">:</span>    <span class="p">(</span><span class="mi">52</span><span class="p">,</span>  <span class="mi">101</span><span class="p">,</span> <span class="mi">164</span><span class="p">),</span>
    <span class="s">&#39;skyblue3&#39;</span><span class="p">:</span>    <span class="p">(</span><span class="mi">32</span><span class="p">,</span>   <span class="mi">74</span><span class="p">,</span> <span class="mi">135</span><span class="p">),</span>
    <span class="s">&#39;plum1&#39;</span><span class="p">:</span>       <span class="p">(</span><span class="mi">173</span><span class="p">,</span> <span class="mi">127</span><span class="p">,</span> <span class="mi">168</span><span class="p">),</span>
    <span class="s">&#39;plum2&#39;</span><span class="p">:</span>       <span class="p">(</span><span class="mi">117</span><span class="p">,</span>  <span class="mi">80</span><span class="p">,</span> <span class="mi">123</span><span class="p">),</span>
    <span class="s">&#39;plum3&#39;</span><span class="p">:</span>       <span class="p">(</span><span class="mi">92</span><span class="p">,</span>  <span class="mi">53</span><span class="p">,</span> <span class="mi">102</span><span class="p">),</span>
    <span class="s">&#39;chocolate1&#39;</span><span class="p">:</span>  <span class="p">(</span><span class="mi">233</span><span class="p">,</span> <span class="mi">185</span><span class="p">,</span> <span class="mi">110</span><span class="p">),</span>
    <span class="s">&#39;chocolate2&#39;</span><span class="p">:</span>  <span class="p">(</span><span class="mi">193</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span>  <span class="mi">17</span><span class="p">),</span>
    <span class="s">&#39;chocolate3&#39;</span><span class="p">:</span>  <span class="p">(</span><span class="mi">143</span><span class="p">,</span>  <span class="mi">89</span><span class="p">,</span>   <span class="mi">2</span><span class="p">),</span>
    <span class="s">&#39;scarletred1&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">239</span><span class="p">,</span>  <span class="mi">41</span><span class="p">,</span>  <span class="mi">41</span><span class="p">),</span>
    <span class="s">&#39;scarletred2&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">204</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">),</span>
    <span class="s">&#39;scarletred3&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">164</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">),</span>
    <span class="s">&#39;aluminium1&#39;</span><span class="p">:</span>  <span class="p">(</span><span class="mi">238</span><span class="p">,</span> <span class="mi">238</span><span class="p">,</span> <span class="mi">236</span><span class="p">),</span>
    <span class="s">&#39;aluminium2&#39;</span><span class="p">:</span>  <span class="p">(</span><span class="mi">211</span><span class="p">,</span> <span class="mi">215</span><span class="p">,</span> <span class="mi">207</span><span class="p">),</span>
    <span class="s">&#39;aluminium3&#39;</span><span class="p">:</span>  <span class="p">(</span><span class="mi">186</span><span class="p">,</span> <span class="mi">189</span><span class="p">,</span> <span class="mi">182</span><span class="p">),</span>
    <span class="s">&#39;aluminium4&#39;</span><span class="p">:</span>  <span class="p">(</span><span class="mi">136</span><span class="p">,</span> <span class="mi">138</span><span class="p">,</span> <span class="mi">133</span><span class="p">),</span>
    <span class="s">&#39;aluminium5&#39;</span><span class="p">:</span>  <span class="p">(</span><span class="mi">85</span><span class="p">,</span>   <span class="mi">87</span><span class="p">,</span>  <span class="mi">83</span><span class="p">),</span>
    <span class="s">&#39;aluminium6&#39;</span><span class="p">:</span>  <span class="p">(</span><span class="mi">46</span><span class="p">,</span>   <span class="mi">52</span><span class="p">,</span>  <span class="mi">54</span><span class="p">)}</span>


<span class="n">graph_colors</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">tango_colors</span><span class="p">[</span><span class="n">_x</span><span class="p">]</span> <span class="k">for</span> <span class="n">_x</span> <span class="ow">in</span> <span class="p">(</span>
        <span class="s">&#39;scarletred2&#39;</span><span class="p">,</span>
        <span class="s">&#39;skyblue3&#39;</span><span class="p">,</span>
        <span class="s">&#39;chameleon3&#39;</span><span class="p">,</span>
        <span class="s">&#39;orange2&#39;</span><span class="p">,</span>
        <span class="s">&#39;plum2&#39;</span><span class="p">,</span>
        <span class="s">&#39;chocolate2&#39;</span><span class="p">,</span>
        <span class="s">&#39;butter2&#39;</span><span class="p">)]</span>


<span class="k">def</span> <span class="nf">color</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span> <span class="k">for</span> <span class="n">_x</span> <span class="ow">in</span> <span class="s">&#39;rgb&#39;</span><span class="p">])</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">graph_colors</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">graph_colors</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">tango_colors</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tango_colors</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">assert</span> <span class="bp">False</span><span class="p">,</span> <span class="s">&quot;Don&#39;t know what to do with this color definition: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">x</span>


<span class="k">def</span> <span class="nf">to01</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="mf">255.</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">c</span><span class="p">)</span>


<div class="viewcode-block" id="nice_value"><a class="viewcode-back" href="../../plot.html#pyrocko.plot.nice_value">[docs]</a><span class="k">def</span> <span class="nf">nice_value</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Round x to nice value.&#39;&#39;&#39;</span>

    <span class="n">exp</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="n">x</span>
        <span class="n">sign</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">while</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">/=</span> <span class="mf">10.0</span>
        <span class="n">exp</span> <span class="o">*=</span> <span class="mf">10.0</span>
    <span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">*=</span> <span class="mf">10.0</span>
        <span class="n">exp</span> <span class="o">/=</span> <span class="mf">10.0</span>

    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mf">0.75</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sign</span> <span class="o">*</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="n">exp</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mf">0.35</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sign</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">exp</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mf">0.15</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sign</span> <span class="o">*</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="n">exp</span>

    <span class="k">return</span> <span class="n">sign</span> <span class="o">*</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="n">exp</span>

</div>
<span class="n">_papersizes_list</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s">&#39;a0&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">2380.</span><span class="p">,</span> <span class="mf">3368.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;a1&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">1684.</span><span class="p">,</span> <span class="mf">2380.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;a2&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">1190.</span><span class="p">,</span> <span class="mf">1684.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;a3&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">842.</span><span class="p">,</span> <span class="mf">1190.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;a4&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">595.</span><span class="p">,</span> <span class="mf">842.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;a5&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">421.</span><span class="p">,</span> <span class="mf">595.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;a6&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">297.</span><span class="p">,</span> <span class="mf">421.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;a7&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">210.</span><span class="p">,</span> <span class="mf">297.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;a8&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">148.</span><span class="p">,</span> <span class="mf">210.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;a9&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">105.</span><span class="p">,</span> <span class="mf">148.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;a10&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">74.</span><span class="p">,</span> <span class="mf">105.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;b0&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">2836.</span><span class="p">,</span> <span class="mf">4008.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;b1&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">2004.</span><span class="p">,</span> <span class="mf">2836.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;b2&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">1418.</span><span class="p">,</span> <span class="mf">2004.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;b3&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">1002.</span><span class="p">,</span> <span class="mf">1418.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;b4&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">709.</span><span class="p">,</span> <span class="mf">1002.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;b5&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">501.</span><span class="p">,</span> <span class="mf">709.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;archa&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">648.</span><span class="p">,</span> <span class="mf">864.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;archb&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">864.</span><span class="p">,</span> <span class="mf">1296.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;archc&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">1296.</span><span class="p">,</span> <span class="mf">1728.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;archd&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">1728.</span><span class="p">,</span> <span class="mf">2592.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;arche&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">2592.</span><span class="p">,</span> <span class="mf">3456.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;flsa&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">612.</span><span class="p">,</span> <span class="mf">936.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;halfletter&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">396.</span><span class="p">,</span> <span class="mf">612.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;note&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">540.</span><span class="p">,</span> <span class="mf">720.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;letter&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">612.</span><span class="p">,</span> <span class="mf">792.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;legal&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">612.</span><span class="p">,</span> <span class="mf">1008.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;11x17&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">792.</span><span class="p">,</span> <span class="mf">1224.</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;ledger&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">1224.</span><span class="p">,</span> <span class="mf">792.</span><span class="p">))]</span>

<span class="n">papersizes</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">_papersizes_list</span><span class="p">)</span>

<span class="n">_doc_papersizes</span> <span class="o">=</span> <span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&quot;``&#39;</span><span class="si">%s</span><span class="s">&#39;``&quot;</span> <span class="o">%</span> <span class="n">k</span> <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="ow">in</span> <span class="n">_papersizes_list</span><span class="p">)</span>


<div class="viewcode-block" id="papersize"><a class="viewcode-back" href="../../plot.html#pyrocko.plot.papersize">[docs]</a><span class="k">def</span> <span class="nf">papersize</span><span class="p">(</span><span class="n">paper</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s">&#39;landscape&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;point&#39;</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Get paper size from string.</span>

<span class="sd">    :param paper: string selecting paper size. Choices: %s</span>
<span class="sd">    :param orientation: ``&#39;landscape&#39;``, or ``&#39;portrait&#39;``</span>
<span class="sd">    :param units: Units to be returned. Choices: %s</span>

<span class="sd">    :returns: ``(width, height)``</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">assert</span> <span class="n">orientation</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;landscape&#39;</span><span class="p">,</span> <span class="s">&#39;portrait&#39;</span><span class="p">)</span>

    <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">papersizes</span><span class="p">[</span><span class="n">paper</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
    <span class="k">if</span> <span class="n">orientation</span> <span class="o">==</span> <span class="s">&#39;landscape&#39;</span><span class="p">:</span>
        <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">h</span><span class="p">,</span> <span class="n">w</span>

    <span class="k">return</span> <span class="n">apply_units</span><span class="p">((</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">),</span> <span class="n">units</span><span class="p">)</span>
</div>
<span class="n">papersize</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">%=</span> <span class="p">(</span><span class="n">_doc_papersizes</span><span class="p">,</span> <span class="n">_doc_units</span><span class="p">)</span>


<div class="viewcode-block" id="AutoScaler"><a class="viewcode-back" href="../../plot.html#pyrocko.plot.AutoScaler">[docs]</a><span class="k">class</span> <span class="nc">AutoScaler</span><span class="p">:</span>

    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Tunable 1D autoscaling based on data range.</span>

<span class="sd">    Instances of this class may be used to determine nice minima, maxima and</span>
<span class="sd">    increments for ax annotations, as well as suitable common exponents for</span>
<span class="sd">    notation.</span>

<span class="sd">    The autoscaling process is guided by the following public attributes:</span>

<span class="sd">        .. py:attribute:: approx_ticks</span>

<span class="sd">            Approximate number of increment steps (tickmarks) to generate.</span>

<span class="sd">        .. py:attribute:: mode</span>

<span class="sd">            Mode of operation: one of ``&#39;auto&#39;``, ``&#39;min-max&#39;``, ``&#39;0-max&#39;``,</span>
<span class="sd">            ``&#39;min-0&#39;``, ``&#39;symmetric&#39;`` or ``&#39;off&#39;``.</span>

<span class="sd">            ================ ==================================================</span>
<span class="sd">            mode             description</span>
<span class="sd">            ================ ==================================================</span>
<span class="sd">            ``&#39;auto&#39;``:      Look at data range and choose one of the choices</span>
<span class="sd">                             below.</span>
<span class="sd">            ``&#39;min-max&#39;``:   Output range is selected to include data range.</span>
<span class="sd">            ``&#39;0-max&#39;``:     Output range shall start at zero and end at data</span>
<span class="sd">                             max.</span>
<span class="sd">            ``&#39;min-0&#39;``:     Output range shall start at data min and end at</span>
<span class="sd">                             zero.</span>
<span class="sd">            ``&#39;symmetric&#39;``: Output range shall by symmetric by zero.</span>
<span class="sd">            ``&#39;off&#39;``:       Similar to ``&#39;min-max&#39;``, but snap and space are</span>
<span class="sd">                             disabled, such that the output range always</span>
<span class="sd">                             exactly matches the data range.</span>
<span class="sd">            ================ ==================================================</span>

<span class="sd">        .. py:attribute:: exp</span>

<span class="sd">            If defined, override automatically determined exponent for notation</span>
<span class="sd">            by the given value.</span>

<span class="sd">        .. py:attribute:: snap</span>

<span class="sd">            If set to True, snap output range to multiples of increment. This</span>
<span class="sd">            parameter has no effect, if mode is set to ``&#39;off&#39;``.</span>

<span class="sd">        .. py:attribute:: inc</span>

<span class="sd">            If defined, override automatically determined tick increment by the</span>
<span class="sd">            given value.</span>

<span class="sd">        .. py:attribute:: space</span>

<span class="sd">            Add some padding to the range. The value given, is the fraction by</span>
<span class="sd">            which the output range is increased on each side. If mode is</span>
<span class="sd">            ``&#39;0-max&#39;`` or ``&#39;min-0&#39;``, the end at zero is kept fixed at zero.</span>
<span class="sd">            This parameter has no effect if mode is set to ``&#39;off&#39;``.</span>

<span class="sd">        .. py:attribute:: exp_factor</span>

<span class="sd">            Exponent of notation is chosen to be a multiple of this value.</span>

<span class="sd">        .. py:attribute:: no_exp_interval:</span>

<span class="sd">            Range of exponent, for which no exponential notation is allowed.</span>

<span class="sd">   &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">approx_ticks</span><span class="o">=</span><span class="mf">7.0</span><span class="p">,</span>
            <span class="n">mode</span><span class="o">=</span><span class="s">&#39;auto&#39;</span><span class="p">,</span>
            <span class="n">exp</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
            <span class="n">snap</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="n">inc</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
            <span class="n">space</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">exp_factor</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="n">no_exp_interval</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)):</span>

        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Create new AutoScaler instance.</span>

<span class="sd">        The parameters are described in the AutoScaler documentation.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">approx_ticks</span> <span class="o">=</span> <span class="n">approx_ticks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exp</span> <span class="o">=</span> <span class="n">exp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snap</span> <span class="o">=</span> <span class="n">snap</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inc</span> <span class="o">=</span> <span class="n">inc</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">space</span> <span class="o">=</span> <span class="n">space</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exp_factor</span> <span class="o">=</span> <span class="n">exp_factor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">no_exp_interval</span> <span class="o">=</span> <span class="n">no_exp_interval</span>

<div class="viewcode-block" id="AutoScaler.make_scale"><a class="viewcode-back" href="../../plot.html#pyrocko.plot.AutoScaler.make_scale">[docs]</a>    <span class="k">def</span> <span class="nf">make_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_range</span><span class="p">,</span> <span class="n">override_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Get nice minimum, maximum and increment for given data range.</span>

<span class="sd">        Returns ``(minimum, maximum, increment)`` or ``(maximum, minimum,</span>
<span class="sd">        -increment)``, depending on whether data_range is ``(data_min,</span>
<span class="sd">        data_max)`` or ``(data_max, data_min)``. If `override_mode` is defined,</span>
<span class="sd">        the mode attribute is temporarily overridden by the given value.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">data_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data_range</span><span class="p">)</span>
        <span class="n">data_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">data_range</span><span class="p">)</span>

        <span class="n">is_reverse</span> <span class="o">=</span> <span class="p">(</span><span class="n">data_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">data_range</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s">&#39;auto&#39;</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">guess_autoscale_mode</span><span class="p">(</span><span class="n">data_min</span><span class="p">,</span> <span class="n">data_max</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">override_mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">override_mode</span>

        <span class="n">mi</span><span class="p">,</span> <span class="n">ma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="s">&#39;off&#39;</span><span class="p">:</span>
            <span class="n">mi</span><span class="p">,</span> <span class="n">ma</span> <span class="o">=</span> <span class="n">data_min</span><span class="p">,</span> <span class="n">data_max</span>
        <span class="k">elif</span> <span class="n">a</span> <span class="o">==</span> <span class="s">&#39;0-max&#39;</span><span class="p">:</span>
            <span class="n">mi</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="k">if</span> <span class="n">data_max</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="n">ma</span> <span class="o">=</span> <span class="n">data_max</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ma</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">elif</span> <span class="n">a</span> <span class="o">==</span> <span class="s">&#39;min-0&#39;</span><span class="p">:</span>
            <span class="n">ma</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="k">if</span> <span class="n">data_min</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="n">mi</span> <span class="o">=</span> <span class="n">data_min</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">mi</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span>
        <span class="k">elif</span> <span class="n">a</span> <span class="o">==</span> <span class="s">&#39;min-max&#39;</span><span class="p">:</span>
            <span class="n">mi</span><span class="p">,</span> <span class="n">ma</span> <span class="o">=</span> <span class="n">data_min</span><span class="p">,</span> <span class="n">data_max</span>
        <span class="k">elif</span> <span class="n">a</span> <span class="o">==</span> <span class="s">&#39;symmetric&#39;</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">data_min</span><span class="p">),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">data_max</span><span class="p">))</span>
            <span class="n">mi</span> <span class="o">=</span> <span class="o">-</span><span class="n">m</span>
            <span class="n">ma</span> <span class="o">=</span> <span class="n">m</span>

        <span class="n">nmi</span> <span class="o">=</span> <span class="n">mi</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">mi</span> <span class="o">!=</span> <span class="mf">0.</span> <span class="ow">or</span> <span class="n">a</span> <span class="o">==</span> <span class="s">&#39;min-max&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">a</span> <span class="o">!=</span> <span class="s">&#39;off&#39;</span><span class="p">:</span>
            <span class="n">nmi</span> <span class="o">=</span> <span class="n">mi</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">space</span><span class="o">*</span><span class="p">(</span><span class="n">ma</span><span class="o">-</span><span class="n">mi</span><span class="p">)</span>

        <span class="n">nma</span> <span class="o">=</span> <span class="n">ma</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">ma</span> <span class="o">!=</span> <span class="mf">0.</span> <span class="ow">or</span> <span class="n">a</span> <span class="o">==</span> <span class="s">&#39;min-max&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">a</span> <span class="o">!=</span> <span class="s">&#39;off&#39;</span><span class="p">:</span>
            <span class="n">nma</span> <span class="o">=</span> <span class="n">ma</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">space</span><span class="o">*</span><span class="p">(</span><span class="n">ma</span><span class="o">-</span><span class="n">mi</span><span class="p">)</span>

        <span class="n">mi</span><span class="p">,</span> <span class="n">ma</span> <span class="o">=</span> <span class="n">nmi</span><span class="p">,</span> <span class="n">nma</span>

        <span class="k">if</span> <span class="n">mi</span> <span class="o">==</span> <span class="n">ma</span> <span class="ow">and</span> <span class="n">a</span> <span class="o">!=</span> <span class="s">&#39;off&#39;</span><span class="p">:</span>
            <span class="n">mi</span> <span class="o">-=</span> <span class="mf">1.0</span>
            <span class="n">ma</span> <span class="o">+=</span> <span class="mf">1.0</span>

        <span class="c"># make nice tick increment</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">inc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inc</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">approx_ticks</span> <span class="o">&gt;</span> <span class="mf">0.</span><span class="p">:</span>
                <span class="n">inc</span> <span class="o">=</span> <span class="n">nice_value</span><span class="p">((</span><span class="n">ma</span><span class="o">-</span><span class="n">mi</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">approx_ticks</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">inc</span> <span class="o">=</span> <span class="n">nice_value</span><span class="p">((</span><span class="n">ma</span><span class="o">-</span><span class="n">mi</span><span class="p">)</span><span class="o">*</span><span class="mf">10.</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">inc</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">inc</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="c"># snap min and max to ticks if this is wanted</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snap</span> <span class="ow">and</span> <span class="n">a</span> <span class="o">!=</span> <span class="s">&#39;off&#39;</span><span class="p">:</span>
            <span class="n">ma</span> <span class="o">=</span> <span class="n">inc</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">ma</span><span class="o">/</span><span class="n">inc</span><span class="p">)</span>
            <span class="n">mi</span> <span class="o">=</span> <span class="n">inc</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">mi</span><span class="o">/</span><span class="n">inc</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_reverse</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ma</span><span class="p">,</span> <span class="n">mi</span><span class="p">,</span> <span class="o">-</span><span class="n">inc</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mi</span><span class="p">,</span> <span class="n">ma</span><span class="p">,</span> <span class="n">inc</span>
</div>
<div class="viewcode-block" id="AutoScaler.make_exp"><a class="viewcode-back" href="../../plot.html#pyrocko.plot.AutoScaler.make_exp">[docs]</a>    <span class="k">def</span> <span class="nf">make_exp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get nice exponent for notation of `x`.</span>

<span class="sd">        For ax annotations, give tick increment as `x`.&#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">exp</span>

        <span class="n">x</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="mi">10</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">no_exp_interval</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">no_exp_interval</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">return</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">exp_factor</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">exp_factor</span>
</div>
<div class="viewcode-block" id="AutoScaler.guess_autoscale_mode"><a class="viewcode-back" href="../../plot.html#pyrocko.plot.AutoScaler.guess_autoscale_mode">[docs]</a>    <span class="k">def</span> <span class="nf">guess_autoscale_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_min</span><span class="p">,</span> <span class="n">data_max</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Guess mode of operation, based on data range.</span>

<span class="sd">        Used to map ``&#39;auto&#39;`` mode to ``&#39;0-max&#39;``, ``&#39;min-0&#39;``, ``&#39;min-max&#39;``</span>
<span class="sd">        or ``&#39;symmetric&#39;``.&#39;&#39;&#39;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;min-max&#39;</span>
        <span class="k">if</span> <span class="n">data_min</span> <span class="o">&gt;=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data_min</span> <span class="o">&lt;</span> <span class="n">data_max</span><span class="o">/</span><span class="mf">2.</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;0-max&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;min-max&#39;</span>
        <span class="k">if</span> <span class="n">data_max</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data_max</span> <span class="o">&gt;</span> <span class="n">data_min</span><span class="o">/</span><span class="mf">2.</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;min-0&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;min-max&#39;</span>
        <span class="k">if</span> <span class="n">data_min</span> <span class="o">&lt;</span> <span class="mf">0.0</span> <span class="ow">and</span> <span class="n">data_max</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">((</span><span class="nb">abs</span><span class="p">(</span><span class="n">data_max</span><span class="p">)</span><span class="o">-</span><span class="nb">abs</span><span class="p">(</span><span class="n">data_min</span><span class="p">))</span> <span class="o">/</span>
                   <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">data_max</span><span class="p">)</span><span class="o">+</span><span class="nb">abs</span><span class="p">(</span><span class="n">data_min</span><span class="p">)))</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;symmetric&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;min-max&#39;</span>
        <span class="k">return</span> <span class="n">a</span>


<span class="c"># below, some convenience functions for matplotlib plotting</span>
</div></div>
<div class="viewcode-block" id="mpl_init"><a class="viewcode-back" href="../../plot.html#pyrocko.plot.mpl_init">[docs]</a><span class="k">def</span> <span class="nf">mpl_init</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Initialize Matplotlib rc parameters Pyrocko style.</span>

<span class="sd">    Returns the matplotlib.pyplot module for convenience.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="kn">import</span> <span class="nn">matplotlib</span>

    <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcdefaults</span><span class="p">()</span>
    <span class="n">matplotlib</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s">&#39;font&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span><span class="p">)</span>
    <span class="n">matplotlib</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s">&#39;axes&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
    <span class="n">matplotlib</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s">&#39;xtick&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">)</span>
    <span class="n">matplotlib</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s">&#39;ytick&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">)</span>
    <span class="n">ts</span> <span class="o">=</span> <span class="n">fontsize</span> <span class="o">*</span> <span class="mf">0.7071</span>
    <span class="n">matplotlib</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s">&#39;xtick.major&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="n">ts</span><span class="p">)</span>
    <span class="n">matplotlib</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s">&#39;ytick.major&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="n">ts</span><span class="p">)</span>
    <span class="n">matplotlib</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s">&#39;figure&#39;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s">&#39;white&#39;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">matplotlib</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s">&#39;axes&#39;</span><span class="p">,</span> <span class="n">color_cycle</span><span class="o">=</span><span class="p">[</span><span class="n">to01</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">graph_colors</span><span class="p">])</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
    <span class="k">return</span> <span class="n">plt</span>

</div>
<div class="viewcode-block" id="mpl_margins"><a class="viewcode-back" href="../../plot.html#pyrocko.plot.mpl_margins">[docs]</a><span class="k">def</span> <span class="nf">mpl_margins</span><span class="p">(</span>
        <span class="n">fig</span><span class="p">,</span>
        <span class="n">left</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">wspace</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">nw</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">nh</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="nb">all</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">units</span><span class="o">=</span><span class="s">&#39;inch&#39;</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Adjust Matplotlib subplot params with absolute values in user units.</span>

<span class="sd">    Calls :py:meth:`matplotlib.figure.Figure.subplots_adjust` on ``fig`` with</span>
<span class="sd">    absolute margin widths/heights rather than relative values. If ``wspace``</span>
<span class="sd">    or ``hspace`` are given, the number of subplots must be given in ``nw``</span>
<span class="sd">    and ``nh`` because ``subplots_adjust()`` treats the spacing parameters</span>
<span class="sd">    relative to the subplot width and height.</span>

<span class="sd">    :param units: Unit multiplier or unit as string: %s</span>
<span class="sd">    :param w: set ``left`` and ``right`` at once</span>
<span class="sd">    :param h: set ``top`` and ``bottom`` at once</span>
<span class="sd">    :param nw: number of subplots horizontally</span>
<span class="sd">    :param nh: number of subplots vertically</span>
<span class="sd">    :param all: set ``left``, ``top``, ``right``, and ``bottom`` at once</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">left</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">bottom</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span>
        <span class="nb">float</span><span class="p">,</span> <span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">bottom</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">w</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">left</span> <span class="o">=</span> <span class="n">right</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">h</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">top</span> <span class="o">=</span> <span class="n">bottom</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">all</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">left</span> <span class="o">=</span> <span class="n">right</span> <span class="o">=</span> <span class="n">top</span> <span class="o">=</span> <span class="n">bottom</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">all</span><span class="p">)</span>

    <span class="n">ufac</span> <span class="o">=</span> <span class="n">units_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">units</span><span class="p">,</span> <span class="n">units</span><span class="p">)</span> <span class="o">/</span> <span class="n">inch</span>

    <span class="n">left</span> <span class="o">*=</span> <span class="n">ufac</span>
    <span class="n">right</span> <span class="o">*=</span> <span class="n">ufac</span>
    <span class="n">top</span> <span class="o">*=</span> <span class="n">ufac</span>
    <span class="n">bottom</span> <span class="o">*=</span> <span class="n">ufac</span>

    <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">get_size_inches</span><span class="p">()</span>

    <span class="n">rel_wspace</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">rel_hspace</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">if</span> <span class="n">wspace</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">wspace</span> <span class="o">*=</span> <span class="n">ufac</span>
        <span class="k">if</span> <span class="n">nw</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;wspace must be given in combination with nw&#39;</span><span class="p">)</span>

        <span class="n">wsub</span> <span class="o">=</span> <span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="n">left</span> <span class="o">-</span> <span class="n">right</span> <span class="o">-</span> <span class="p">(</span><span class="n">nw</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">wspace</span><span class="p">)</span> <span class="o">/</span> <span class="n">nw</span>
        <span class="n">rel_wspace</span> <span class="o">=</span> <span class="n">wspace</span> <span class="o">/</span> <span class="n">wsub</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">wsub</span> <span class="o">=</span> <span class="n">width</span> <span class="o">-</span> <span class="n">left</span> <span class="o">-</span> <span class="n">right</span>

    <span class="k">if</span> <span class="n">hspace</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">hspace</span> <span class="o">*=</span> <span class="n">ufac</span>
        <span class="k">if</span> <span class="n">nh</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;hspace must be given in combination with nh&#39;</span><span class="p">)</span>

        <span class="n">hsub</span> <span class="o">=</span> <span class="p">(</span><span class="n">height</span> <span class="o">-</span> <span class="n">top</span> <span class="o">-</span> <span class="n">bottom</span> <span class="o">-</span> <span class="p">(</span><span class="n">nh</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">hspace</span><span class="p">)</span> <span class="o">/</span> <span class="n">nh</span>
        <span class="n">rel_hspace</span> <span class="o">=</span> <span class="n">hspace</span> <span class="o">/</span> <span class="n">hsub</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">hsub</span> <span class="o">=</span> <span class="n">height</span> <span class="o">-</span> <span class="n">top</span> <span class="o">-</span> <span class="n">bottom</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span>
        <span class="n">left</span><span class="o">=</span><span class="n">left</span><span class="o">/</span><span class="n">width</span><span class="p">,</span>
        <span class="n">right</span><span class="o">=</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">right</span><span class="o">/</span><span class="n">width</span><span class="p">,</span>
        <span class="n">bottom</span><span class="o">=</span><span class="n">bottom</span><span class="o">/</span><span class="n">height</span><span class="p">,</span>
        <span class="n">top</span><span class="o">=</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">top</span><span class="o">/</span><span class="n">height</span><span class="p">,</span>
        <span class="n">wspace</span><span class="o">=</span><span class="n">rel_wspace</span><span class="p">,</span>
        <span class="n">hspace</span><span class="o">=</span><span class="n">rel_hspace</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">labelpos</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">xpos</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">ypos</span><span class="o">=</span><span class="mf">0.</span><span class="p">):</span>
        <span class="n">xpos</span> <span class="o">*=</span> <span class="n">ufac</span>
        <span class="n">ypos</span> <span class="o">*=</span> <span class="n">ufac</span>
        <span class="n">axes</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_label_coords</span><span class="p">(</span><span class="o">-</span><span class="p">((</span><span class="n">left</span><span class="o">-</span><span class="n">xpos</span><span class="p">)</span> <span class="o">/</span> <span class="n">wsub</span><span class="p">),</span> <span class="mf">0.5</span><span class="p">)</span>
        <span class="n">axes</span><span class="o">.</span><span class="n">get_xaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_label_coords</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="p">((</span><span class="n">bottom</span><span class="o">-</span><span class="n">ypos</span><span class="p">)</span> <span class="o">/</span> <span class="n">hsub</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">labelpos</span>
</div>
<span class="n">mpl_margins</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">%=</span> <span class="n">_doc_units</span>


<div class="viewcode-block" id="mpl_labelspace"><a class="viewcode-back" href="../../plot.html#pyrocko.plot.mpl_labelspace">[docs]</a><span class="k">def</span> <span class="nf">mpl_labelspace</span><span class="p">(</span><span class="n">axes</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Add some extra padding between label and ax annotations.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">xa</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">get_xaxis</span><span class="p">()</span>
    <span class="n">ya</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;labelpad&#39;</span><span class="p">,</span> <span class="s">&#39;LABELPAD&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">xa</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">xa</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">xa</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span><span class="o">.</span><span class="n">get_fontsize</span><span class="p">())</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">ya</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">ya</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span><span class="o">.</span><span class="n">get_fontsize</span><span class="p">())</span>
            <span class="k">break</span>

</div>
<div class="viewcode-block" id="mpl_papersize"><a class="viewcode-back" href="../../plot.html#pyrocko.plot.mpl_papersize">[docs]</a><span class="k">def</span> <span class="nf">mpl_papersize</span><span class="p">(</span><span class="n">paper</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s">&#39;landscape&#39;</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Get paper size in inch from string.</span>

<span class="sd">    Returns argument suitable to be passed to the ``figsize`` argument of</span>
<span class="sd">    :py:func:`pyplot.figure`.</span>

<span class="sd">    :param paper: string selecting paper size. Choices: %s</span>
<span class="sd">    :param orientation: ``&#39;landscape&#39;``, or ``&#39;portrait&#39;``</span>

<span class="sd">    :returns: ``(width, height)``</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">return</span> <span class="n">papersize</span><span class="p">(</span><span class="n">paper</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;inch&#39;</span><span class="p">)</span>
</div>
<span class="n">mpl_papersize</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">%=</span> <span class="n">_doc_papersizes</span>


<span class="k">class</span> <span class="nc">InvalidColorDef</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="k">pass</span>


<div class="viewcode-block" id="mpl_color"><a class="viewcode-back" href="../../plot.html#pyrocko.plot.mpl_color">[docs]</a><span class="k">def</span> <span class="nf">mpl_color</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Convert string into color float tuple ranged 0-1 for use with Matplotlib.</span>

<span class="sd">    Accepts tango color names, matplotlib color names, and slash-separated</span>
<span class="sd">    strings. In the latter case, if values are larger than 1., the color</span>
<span class="sd">    is interpreted as 0-255 ranged. Single-valued (grayscale), three-valued</span>
<span class="sd">    (color) and four-valued (color with alpha) are accepted. An</span>
<span class="sd">    :py:exc:`InvalidColorDef` exception is raised when the convertion fails.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="kn">import</span> <span class="nn">matplotlib.colors</span>

    <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">tango_colors</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">to01</span><span class="p">(</span><span class="n">tango_colors</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>

    <span class="n">s</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="mf">0.</span> <span class="o">&lt;=</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="mf">1.</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">vals</span>

            <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="mf">0.</span> <span class="o">&lt;=</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="mf">255.</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">to01</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">colorConverter</span><span class="o">.</span><span class="n">to_rgba</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="k">pass</span>

    <span class="k">raise</span> <span class="n">InvalidColorDef</span><span class="p">(</span><span class="s">&#39;invalid color definition: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">x</span><span class="p">)</span></div>
</pre></div>

          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">Pyrocko v0.3 Manual</a> &raquo;</li>
          <li><a href="../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2016, The Pyrocko Developers. <img src="http://kinherd.org/pyrocko.png" width="5" height="5">
    </div>
  </body>
</html>